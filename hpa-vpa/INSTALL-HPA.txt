kubectl apply -f https://github.com/kubernetes/autoscaler/releases/latest/download/vertical-pod-autoscaler.yaml
kubectl get pods -n kube-system | grep vpa

üîπ Create VPA for nginx
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: nginx-vpa
  namespace: default
spec:
  targetRef:
    apiVersion: "apps/v1"
    kind: Deployment
    name: nginx
  updatePolicy:
    updateMode: "Auto"

kubectl apply -f nginx-vpa.yaml

kubectl describe vpa nginx-vpa



6Ô∏è‚É£ HPA vs VPA Overview
Feature	HPA	VPA
Scales	Pod count	Pod resources
Scaling type	Horizontal	Vertical
Needs metrics-server	‚úÖ	‚ùå
Pod restart	‚ùå	‚úÖ
Traffic handling	Excellent	Poor
Stateful apps	‚ùå	‚úÖ
Production usage	Very common	Selective

‚ö†Ô∏è Important: Avoid using HPA + VPA on CPU for the same deployment, they may conflict.

Safe combination:

HPA on CPU

VPA on Memory only

7Ô∏è‚É£ Example Use Cases

Web App / Nginx / API ‚Üí HPA

Database / Kafka / ML App ‚Üí VPA

E-commerce site ‚Üí HPA + VPA (CPU HPA, Memory VPA)


# HPA
kubectl autoscale deployment nginx --cpu=50% --min=1 --max=5
kubectl get hpa

# VPA
kubectl apply -f nginx-vpa.yaml
kubectl describe vpa nginx-vpa

# Metrics Server check
kubectl top nodes
kubectl top pods


